!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.transceiver=r():e.transceiver=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=t(1),i=n(o),u=t(4),c=n(u),l=(0,i["default"])("transceiver:main");r["default"]=new(function(){function e(){a(this,e),l("Initializing transceiver"),this.channels={},this.Promise=Promise}return s(e,[{key:"channel",value:function(e){if("string"!=typeof e)throw new Error("Invalid or missing channel name");return this.channels[e]||(l("Initializing channel "+e),this.channels[e]=new c["default"](e),this.channels[e].Promise=this.Promise),this.channels[e]}},{key:"setPromise",value:function(e){l("Setting external promise constructor"),this.Promise=e;var r=!0,t=!1,n=void 0;try{for(var a,s=Object.keys(this.channels)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value;this.channels[o].Promise=this.Promise}}catch(i){t=!0,n=i}finally{try{!r&&s["return"]&&s["return"]()}finally{if(t)throw n}}}},{key:"request",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).request.apply(r,n)}},{key:"reply",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).reply.apply(r,n)}},{key:"replyPromise",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).replyPromise.apply(r,n)}},{key:"all",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).all.apply(r,n)}},{key:"race",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).race.apply(r,n)}},{key:"requestArray",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).requestArray.apply(r,n)}},{key:"requestProps",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).requestProps.apply(r,n)}},{key:"emit",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).emit.apply(r,n)}},{key:"on",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).on.apply(r,n)}},{key:"once",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).once.apply(r,n)}},{key:"off",value:function(e){for(var r,t=arguments.length,n=Array(t>1?t-1:0),a=1;t>a;a++)n[a-1]=arguments[a];return(r=this.channel(e)).off.apply(r,n)}},{key:"reset",value:function(e){return this.channel(e).reset()}}]),e}()),e.exports=r["default"]},function(e,r,t){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function a(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var a=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(a++,"%c"===e&&(s=a))}),e.splice(s,0,n),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(t){}}function i(){var e;try{e=r.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}r=e.exports=t(2),r.log=s,r.formatArgs=a,r.save=o,r.load=i,r.useColors=n,r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(i())},function(e,r,t){function n(){return r.colors[l++%r.colors.length]}function a(e){function t(){}function a(){var e=a,t=+new Date,s=t-(c||t);e.diff=s,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=n());var o=Array.prototype.slice.call(arguments);o[0]=r.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var i=0;o[0]=o[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;i++;var a=r.formatters[n];if("function"==typeof a){var s=o[i];t=a.call(e,s),o.splice(i,1),i--}return t}),"function"==typeof r.formatArgs&&(o=r.formatArgs.apply(e,o));var u=a.log||r.log||console.log.bind(console);u.apply(e,o)}t.enabled=!1,a.enabled=!0;var s=r.enabled(e)?a:t;return s.namespace=e,s}function s(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,a=0;n>a;a++)t[a]&&(e=t[a].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function o(){r.enable("")}function i(e){var t,n;for(t=0,n=r.skips.length;n>t;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;n>t;t++)if(r.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}r=e.exports=a,r.coerce=u,r.disable=o,r.enable=s,r.enabled=i,r.humanize=t(3),r.names=[],r.skips=[],r.formatters={};var c,l=0},function(e,r){function t(e){if(e=""+e,!(e.length>1e4)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*l;case"days":case"day":case"d":return t*c;case"hours":case"hour":case"hrs":case"hr":case"h":return t*u;case"minutes":case"minute":case"mins":case"min":case"m":return t*i;case"seconds":case"second":case"secs":case"sec":case"s":return t*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}}function n(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=i?Math.round(e/i)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function a(e){return s(e,c,"day")||s(e,u,"hour")||s(e,i,"minute")||s(e,o,"second")||e+" ms"}function s(e,r,t){return r>e?void 0:1.5*r>e?Math.floor(e/r)+" "+t:Math.ceil(e/r)+" "+t+"s"}var o=1e3,i=60*o,u=60*i,c=24*u,l=365.25*c;e.exports=function(e,r){return r=r||{},"string"==typeof e?t(e):r["long"]?a(e):n(e)}},function(e,r,t){function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),i=t(1),u=n(i),c=t(5),l=n(c),f=t(20),h=n(f),y=function(){function e(r){s(this,e),this.name=r,this.requestHandlers={},this.emitter=new l["default"],this.dbg=(0,u["default"])("transceiver:channel:"+r)}return o(e,[{key:"reply",value:function(){if("object"==typeof arguments[0])this.createMultipleHandlers.apply(this,arguments);else{if("string"!=typeof arguments[0])throw new Error("Invalid request name");this.createHandler.apply(this,arguments)}return this}},{key:"createHandler",value:function(e,r,t){if(this.dbg("Defining new handler for request '"+e+"'"),"function"!=typeof r)throw new Error("Invalid or missing callback");this.requestHandlers[e]&&this.dbg("Warning: Request '"+e+"' handler will be overwritten"),this.requestHandlers[e]={callback:r,context:t||this}}},{key:"createMultipleHandlers",value:function(e,r){var t=!0,n=!1,a=void 0;try{for(var s,o=Object.keys(e)[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var i=s.value;this.createHandler(i,e[i],r)}}catch(u){n=!0,a=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw a}}}},{key:"replyPromise",value:function(){if("function"!=typeof this.Promise)throw new Error("No global Promise constructor has been found. Use transceiver.setPromise(Promise) to specify one.");if("object"==typeof arguments[0])this.createMultiplePromiseHandlers.apply(this,arguments);else{if("string"!=typeof arguments[0])throw new Error("Invalid request name");this.createPromiseHandler.apply(this,arguments)}return this}},{key:"createPromiseHandler",value:function(e,r,t){var n=this;if("function"!=typeof r)throw new Error("Invalid or missing callback");this.createHandler(e,function(){return new n.Promise(r.bind(t||n))})}},{key:"createMultiplePromiseHandlers",value:function(e,r){var t=!0,n=!1,a=void 0;try{for(var s,o=Object.keys(e)[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var i=s.value;this.createPromiseHandler(i,e[i],r)}}catch(u){n=!0,a=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw a}}}},{key:"request",value:function(){if(Array.isArray(arguments[0]))return this.requestArray.apply(this,arguments);if("object"==typeof arguments[0])return this.requestProps.apply(this,arguments);if("string"==typeof arguments[0])return this.callHandler.apply(this,arguments);throw new Error("Invalid request name")}},{key:"callHandler",value:function(e){if(this.requestHandlers[e]){this.dbg("Calling '"+e+"' request handler");for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;r>n;n++)t[n-1]=arguments[n];return this.Promise?this.Promise.resolve(this.requestHandlers[e].callback.apply(this.requestHandlers[e].context,t)):this.requestHandlers[e].callback.apply(this.requestHandlers[e].context,t)}return this.dbg("Warning: Request '"+e+"' has no handler"),this.Promise?this.Promise.reject(new Error("Request '"+e+"' has no handler")):void 0}},{key:"requestArray",value:function(e){if(Array.isArray(e))return e.map(this.callHandler,this);if("object"==typeof e){var r=[],t=!0,n=!1,s=void 0;try{for(var o,i=Object.keys(e)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value,c=Array.isArray(e[u])?e[u]:[e[u]];r.push(this.callHandler.apply(this,[u].concat(a(c))))}}catch(l){n=!0,s=l}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw s}}return r}throw new Error("Invalid parameter: requests must be an array or an object of requests")}},{key:"requestProps",value:function(e){var r=this,t={};if(Array.isArray(e))e.forEach(function(e){t[e]=r.callHandler(e)});else{if("object"!=typeof e)throw new Error("Invalid parameter: requests must be an array or an object of requests");var n=!0,s=!1,o=void 0;try{for(var i,u=Object.keys(e)[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var c=i.value,l=Array.isArray(e[c])?e[c]:[e[c]];t[c]=this.callHandler.apply(this,[c].concat(a(l)))}}catch(f){s=!0,o=f}finally{try{!n&&u["return"]&&u["return"]()}finally{if(s)throw o}}}return t}},{key:"all",value:function(e){if("function"!=typeof this.Promise)throw new Error("No global Promise constructor has been found. Use transceiver.setPromise(Promise) to specify one.");return this.Promise.all(this.requestArray(e))}},{key:"race",value:function(e){if("function"!=typeof this.Promise)throw new Error("No global Promise constructor has been found. Use transceiver.setPromise(Promise) to specify one.");return this.Promise.race(this.requestArray(e))}},{key:"on",value:function(e){return this.dbg("Defining new handler for event '"+e+"'"),this.emitter.on.apply(this.emitter,arguments),this}},{key:"once",value:function(e,r){var t=this;return this.dbg("Defining new one-time handler for event '"+e+"'"),!r&&this.Promise?new this.Promise(function(r){return t.emitter.once(e,r)}):void this.emitter.once.apply(this.emitter,arguments)}},{key:"emit",value:function(e){return this.dbg("Emitting new '"+e+"' event"),this.emitter.emit.apply(this.emitter,arguments),this}},{key:"off",value:function(e){return this.dbg("Removing new handler for event '"+e+"'"),this.emitter.off.apply(this.emitter,arguments),this}},{key:"reset",value:function(){return this.dbg("Resetting channel"),this.requestHandlers={},(0,h["default"])(this.emitter),this}}]),e}();r["default"]=y,e.exports=r["default"]},function(e,r,t){"use strict";var n,a,s,o,i,u,c,l=t(6),f=t(19),h=Function.prototype.apply,y=Function.prototype.call,p=Object.create,m=Object.defineProperty,g=Object.defineProperties,d=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};n=function(e,r){var t;return f(r),d.call(this,"__ee__")?t=this.__ee__:(t=v.value=p(null),m(this,"__ee__",v),v.value=null),t[e]?"object"==typeof t[e]?t[e].push(r):t[e]=[t[e],r]:t[e]=r,this},a=function(e,r){var t,a;return f(r),a=this,n.call(this,e,t=function(){s.call(a,e,t),h.call(r,this,arguments)}),t.__eeOnceListener__=r,this},s=function(e,r){var t,n,a,s;if(f(r),!d.call(this,"__ee__"))return this;if(t=this.__ee__,!t[e])return this;if(n=t[e],"object"==typeof n)for(s=0;a=n[s];++s)(a===r||a.__eeOnceListener__===r)&&(2===n.length?t[e]=n[s?0:1]:n.splice(s,1));else(n===r||n.__eeOnceListener__===r)&&delete t[e];return this},o=function(e){var r,t,n,a,s;if(d.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"==typeof a){for(t=arguments.length,s=new Array(t-1),r=1;t>r;++r)s[r-1]=arguments[r];for(a=a.slice(),r=0;n=a[r];++r)h.call(n,this,s)}else switch(arguments.length){case 1:y.call(a,this);break;case 2:y.call(a,this,arguments[1]);break;case 3:y.call(a,this,arguments[1],arguments[2]);break;default:for(t=arguments.length,s=new Array(t-1),r=1;t>r;++r)s[r-1]=arguments[r];h.call(a,this,s)}},i={on:n,once:a,off:s,emit:o},u={on:l(n),once:l(a),off:l(s),emit:l(o)},c=g({},u),e.exports=r=function(e){return null==e?p(c):g(Object(e),u)},r.methods=i},function(e,r,t){"use strict";var n,a=t(7),s=t(14),o=t(15),i=t(16);n=e.exports=function(e,r){var t,n,o,u,c;return arguments.length<2||"string"!=typeof e?(u=r,r=e,e=null):u=arguments[2],null==e?(t=o=!0,n=!1):(t=i.call(e,"c"),n=i.call(e,"e"),o=i.call(e,"w")),c={value:r,configurable:t,enumerable:n,writable:o},u?a(s(u),c):c},n.gs=function(e,r,t){var n,u,c,l;return"string"!=typeof e?(c=t,t=r,r=e,e=null):c=arguments[3],null==r?r=void 0:o(r)?null==t?t=void 0:o(t)||(c=t,t=void 0):(c=r,r=t=void 0),null==e?(n=!0,u=!1):(n=i.call(e,"c"),u=i.call(e,"e")),l={get:r,set:t,configurable:n,enumerable:u},c?a(s(c),l):l}},function(e,r,t){"use strict";e.exports=t(8)()?Object.assign:t(9)},function(e,r){"use strict";e.exports=function(){var e,r=Object.assign;return"function"!=typeof r?!1:(e={foo:"raz"},r(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,r,t){"use strict";var n=t(10),a=t(13),s=Math.max;e.exports=function(e,r){var t,o,i,u=s(arguments.length,2);for(e=Object(a(e)),i=function(n){try{e[n]=r[n]}catch(a){t||(t=a)}},o=1;u>o;++o)r=arguments[o],n(r).forEach(i);if(void 0!==t)throw t;return e}},function(e,r,t){"use strict";e.exports=t(11)()?Object.keys:t(12)},function(e,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,r){"use strict";var t=Object.keys;e.exports=function(e){return t(null==e?e:Object(e))}},function(e,r){"use strict";e.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},function(e,r){"use strict";var t=Array.prototype.forEach,n=Object.create,a=function(e,r){var t;for(t in e)r[t]=e[t]};e.exports=function(e){var r=n(null);return t.call(arguments,function(e){null!=e&&a(Object(e),r)}),r}},function(e,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,r,t){"use strict";e.exports=t(17)()?String.prototype.contains:t(18)},function(e,r){"use strict";var t="razdwatrzy";e.exports=function(){return"function"!=typeof t.contains?!1:t.contains("dwa")===!0&&t.contains("foo")===!1}},function(e,r){"use strict";var t=String.prototype.indexOf;e.exports=function(e){return t.call(this,e,arguments[1])>-1}},function(e,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,r,t){"use strict";var n=t(21),a=Object.prototype.hasOwnProperty;e.exports=function(e){var r,t=arguments[1];if(n(e),void 0!==t){if(r=a.call(e,"__ee__")&&e.__ee__,!r)return;return void(r[t]&&delete r[t])}a.call(e,"__ee__")&&delete e.__ee__}},function(e,r,t){"use strict";var n=t(22);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not an Object");return e}},function(e,r){"use strict";var t={"function":!0,object:!0};e.exports=function(e){return null!=e&&t[typeof e]||!1}}])});
//# sourceMappingURL=transceiver.min.js.map
